@model SuperMarket_Models.Models.Branch
@{
	ViewData["Title"] = "Create Branch";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css" integrity="sha512-mR/b5Y7FRsKqrYZou7uysnOdCIJib/7r5QeJMFvLNHNhtye3xJp1TdJVPLtetkukFn227nKpXD9OjUc09lx97Q==" crossorigin="anonymous"
	  referrerpolicy="no-referrer" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js" integrity="sha512-FHZVRMUW9FsXobt+ONiix6Z0tIkxvQfxtCSirkKc5Sb4TKHmqq1dZa8DphF0XqKb3ldLu/wgMa8mT6uXiLlRlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<h3>@ViewData["Title"]</h3>
<div class="row">
	<div class="col-md-8 offset-2" style="border: 2px solid;
  padding: 10px;
  box-shadow: 5px 10px #888888;">
		<p class="text-danger">@ViewBag.msg</p>
		<form id="profile-form" method="post" asp-action="CreateBranch" onsubmit="return confirm('Are you sure to Create?')" class="row" enctype="multipart/form-data">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<input asp-for="BranchId" type="hidden" />
			<div class="form-floating col-6 py-2">
				<label asp-for="BranchName" class="form-label"></label>
				<input asp-for="BranchName" class="form-control" />
			</div>
			<div class="form-floating col-6 py-2">
				<label asp-for="Address" class="form-label"></label>

				<input asp-for="Address" class="form-control" />
			</div>
			<div class="form-floating col-6 py-2">
				<label asp-for="Phone" class="form-label"></label>

				<input asp-for="Phone" class="form-control" />

			</div>
			<div class="form-floating col-6 py-2">
				<label asp-for="Latitude" class="form-label"></label>

				<input asp-for="Latitude" class="form-control" />
			</div>
			<div class="form-floating col-6 py-2">
				<label asp-for="Longtitude" class="form-label"></label>

				<input asp-for="Longtitude" class="form-control" />
			</div>
			<div class="form-floating col-6 py-2">
				<label asp-for="BranchImg" class="form-label"></label>
				<input type="file" name="BranchImg" class="form-control" onchange="return ValidateBranchImg()" id="fileUpload"required />
				<span id="previewImg"></span>

			</div>

			<button id="update-profile-button" type="submit" class="w-100 btn btn-lg btn-primary">Create</button>
		</form>
		<a href="/Admin/Branch/Index">Back to Branch Manage</a>
	</div>
</div>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}
	<script>
		var fileUpload = document.getElementById("fileUpload");
		var previewImg = document.getElementById("previewImg");
		var imgdefault = `<img class="rounded py-2"  width="100px"`;
		function ValidateBranchImg() {
			if (fileUpload.files[0].size > 3000000) {
				alert("Picture must be lower than 3mb");
				fileUpload.value = "";
			} else {
				previewImg.innerHTML = "";
				var temp = window.URL.createObjectURL(fileUpload.files[0]);
				previewImg.innerHTML += imgdefault + " src='" + temp + "'" + "/>";
			}
		}
	</script>